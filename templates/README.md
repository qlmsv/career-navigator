# Тест оценки цифровых навыков и скоринга трудоустройства

## Описание

Комплексный тест для оценки цифровых навыков пользователей и расчета вероятности трудоустройства на основе персональных характеристик.

## Компоненты

### 1. Шаблон теста
- **Файл**: `templates/digital-skills-scoring-test.json`
- **Формат**: JSON с Formily схемой
- **Разделы**:
  - 15 вопросов о цифровых навыках (с весами)
  - 7 вопросов для скоринга трудоустройства
  - Метаданные (конструкты, субконструкты, региональные средние)

### 2. Калькулятор
- **Файл**: `lib/digital-skills-calculator.ts`
- **Функции**:
  - `calculateDigitalSkillsIndex()` - расчет индекса цифровых навыков
  - `calculateEmploymentScoring()` - расчет вероятности трудоустройства
  - `calculateFullResults()` - полный расчет всех метрик

### 3. API Endpoint
- **Путь**: `/api/tests/calculate-skills`
- **Метод**: POST
- **Тело запроса**:
```json
{
  "answers": {
    "skill_1": "yes",
    "skill_2": "no",
    "region": "moscow",
    "gender": "male",
    "age": "26_30",
    ...
  }
}
```
- **Ответ**:
```json
{
  "success": true,
  "data": {
    "digitalSkills": {
      "skillIndex": 0.2345,
      "regionalAverage": 0.2821,
      "difference": -0.0476,
      "percentile": 68.5,
      "skillsBreakdown": [...]
    },
    "employmentScoring": {
      "probability": 0.9466,
      "probabilityPercent": 94.66,
      "rawScore": 17.72,
      "factorsBreakdown": [...]
    },
    "region": "moscow",
    "regionName": "Москва"
  }
}
```

### 4. Компонент результатов
- **Файл**: `components/digital-skills-results.tsx`
- **Возможности**:
  - Визуализация индекса цифровых навыков
  - Сравнение с региональным средним
  - Детализация по каждому навыку
  - Отображение вероятности трудоустройства
  - Разбивка по факторам влияния
  - Персонализированные рекомендации

### 5. Страница теста
- **Путь**: `/digital-skills-test`
- **Файл**: `app/digital-skills-test/page.tsx`
- **Функционал**:
  - Прохождение теста
  - Отправка на расчет
  - Отображение результатов
  - Повторное прохождение

## Алгоритмы расчета

### Индекс цифровых навыков

**Формула**: `Индекс = Σ(ответ × вес)`

Где:
- `ответ` = 1 (да, владею) или 0 (нет, не владею)
- `вес` = предзаданный вес навыка (от 0.0156 до 0.0445)

**Пример**:
- Копирование файлов (да): 1 × 0.0297 = 0.0297
- Редактирование текста (нет): 0 × 0.0224 = 0
- ...
- **Итого**: 0.2345

### Региональное сравнение

- Берется средний индекс по выбранному региону
- Вычисляется разница: `Разница = Индекс пользователя - Региональный средний`
- Определяется процентиль относительно всех регионов

### Скоринг трудоустройства

**Формула**:

1. Начальное произведение = `Константа (0.2142)`
2. Умножаем на веса выбранных факторов:
   - Пол: male=1.0, female=0.415
   - Тип поселения: city=1.0, village=0.91
   - Регион: от 0.69 до 1.1
   - Размер семьи: от 0.6 до 1.0
   - Возраст: от 0.18 до 1.45
   - Образование: от 0.15 до 1.95
   - Профессиональные навыки: от 1.15 до 1.77 (множественный выбор)

3. **Итоговая вероятность**: `P = rawScore / (rawScore + 1)`

**Пример**:
- Константа: 0.2142
- × Пол (male): 1.0
- × Город: 1.0
- × Москва: 1.1
- × Семья (2): 1.0
- × Возраст (26-30): 1.45
- × Бакалавриат: 1.45
- × IT навыки: 1.77
- × Аналитика: 1.45
- **rawScore** ≈ 17.72
- **Вероятность** = 17.72 / 18.72 = **94.66%**

## Веса навыков

| Навык | Вес |
|-------|-----|
| Копирование файлов | 0.0297 |
| Редактирование текста | 0.0224 |
| Работа с таблицами | 0.0341 |
| Редактирование видео/фото | 0.0289 |
| Презентации | 0.0318 |
| Мессенджеры | 0.0156 |
| Подключение устройств | 0.0412 |
| Передача файлов | 0.0287 |
| Установка ПО | 0.0376 |
| Безопасные пароли | 0.0298 |
| Проверка информации | 0.0334 |
| Ограничение данных | 0.0389 |
| Программирование | 0.0445 |
| Онлайн-покупки | 0.0312 |
| Другие действия | 0.0356 |

## Региональные средние

Топ-10 регионов по индексу цифровых навыков:

1. Москва: 0.2821
2. Санкт-Петербург: 0.2203
3. Московская область: 0.1845
4. Тюменская область: 0.1687
5. Ленинградская область: 0.1654
6. Республика Татарстан: 0.1556
7. Краснодарский край: 0.1523
8. Свердловская область: 0.1487
9. Новосибирская область: 0.1421
10. Нижегородская область: 0.1398

## Использование

### Для администраторов

1. Загрузите шаблон в систему:
   - Перейдите в админ-панель → Создать тест
   - Нажмите "Загрузить шаблон"
   - Выберите файл `templates/digital-skills-scoring-test.json`

2. Опубликуйте тест

### Для пользователей

1. Перейдите по адресу `/digital-skills-test`
2. Ответьте на все вопросы
3. Нажмите "Отправить"
4. Получите детальные результаты с рекомендациями

### Программное использование

```typescript
import { calculateFullResults } from '@/lib/digital-skills-calculator'

const answers = {
  skill_1: 'yes',
  skill_2: 'yes',
  skill_3: 'no',
  // ... все 15 навыков
  region: 'moscow',
  gender: 'male',
  settlement_type: 'city',
  family_size: '2',
  age: '26_30',
  education: 'bachelor',
  professional_skills: ['tech', 'analytics']
}

const results = calculateFullResults(answers)

console.log('Индекс навыков:', results.digitalSkills.skillIndex)
console.log('Вероятность:', results.employmentScoring.probabilityPercent + '%')
```

## Визуализация результатов

Компонент `DigitalSkillsResults` предоставляет:

1. **Карточка индекса навыков**:
   - Числовое значение индекса
   - Прогресс-бар
   - Уровень (низкий/средний/высокий)

2. **Сравнение с регионом**:
   - Ваш результат
   - Среднее по региону
   - Разница (с цветовой индикацией)

3. **Детализация по навыкам**:
   - Список всех 15 навыков
   - Отметка владения
   - Вес и вклад каждого

4. **Карточка вероятности**:
   - Процент вероятности
   - Прогресс-бар
   - Уровень (очень низкая/низкая/средняя/высокая/очень высокая)

5. **Факторы влияния**:
   - Все 7+ факторов
   - Значения
   - Веса каждого фактора

6. **Рекомендации**:
   - Топ-3 навыка для развития
   - Персонализированные советы
   - Общие рекомендации по карьере

## Технические детали

- **Framework**: Next.js 15 (App Router)
- **UI**: shadcn/ui components
- **Форма**: SimpleTestViewer (на базе существующей системы)
- **Типизация**: TypeScript с полными типами
- **Валидация**: Проверка обязательных полей
- **Состояние**: React hooks (useState)
- **API**: Next.js Route Handlers

## Тестирование

Запустите dev-сервер:
```bash
npm run dev
```

Откройте в браузере:
```
http://localhost:3000/digital-skills-test
```

## Расширение

Для добавления новых навыков или факторов:

1. Обновите веса в `lib/digital-skills-calculator.ts`
2. Добавьте вопросы в `templates/digital-skills-scoring-test.json`
3. При необходимости обновите типы TypeScript
4. Запустите тесты

## Лицензия

MIT
